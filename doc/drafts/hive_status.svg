<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background-color: rgb(255, 255, 255);" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="816px" height="1332px" viewBox="-0.5 -0.5 816 1332" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2021-03-26T14:21:09.628Z&quot; agent=&quot;5.0 (X11)&quot; etag=&quot;pAmXoF_O7WjI-GwjZrKo&quot; version=&quot;14.4.2&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;tQAZTCWvuyMUhmyrvwFS&quot; name=&quot;Page-1&quot;&gt;7V1bc+K4Ev4t54Ha3YdJmTt5JIRMcjYJOcDcnlLCFuCNsRjZTmB//VG35KtMQiYYPAlVM8GWZVnuy9fdakmu1HuL1WdOlvMbZlGnUjOsVaV+XqnVqo1arQL/DGstS06rp7Jgxm1LVYoLRva/VBUaqjSwLeqlKvqMOb69TBeazHWp6afKCOfsKV1typz0U5dkRrWCkUkcvfSbbflzWdppGnH5JbVn8/DJVUNdWZCwsirw5sRiT4mier9S73HGfHm0WPWoA8QL6SLvu9hwNeoYp66/zQ3O//55HA//+2CYnWnV6wx+zr/XP6lWHokTqBe+vPraFyXd68+D4dX48kZ13l+HFPHpSjzvbO4vHFFQFYeez9kD7TGHcVHiMlfUPJvajpMpIo49c8WpKXpMRfnZI+W+LWjdVRcWtmXBY86e5rZPR0tiwjOfhGSJMs4C16LwMgY0z1xfSQuQUp6rToYvJVqnq43UqkY8EMJL2YL6fC2qrNLyp8S2rk6fYhmoh4ydJ/gflhEldrOo4Zgz4kAx5xWMqmmMuvLFebC0iC+IIu52p4wLobOZC8+fsEBcb5EFkM6dePADujOn4u/EYeaDOSe2WwB3HTr138bbHbCvmWZfW2dfzdgn+5oa+34IVMsSn1oCe9Qp4/6czZhLnH5cmiFUXOeasaXi1z/U99dKNUjgszQ36cr2vyeOf0BTJ011dr5SLePJOjxxBQm+xxXh9EfyWnwbnq1TfISXep6LggYs4CZ9hn51Bf2Ez6j/TL1GvlRw6gjNeEz3Y+dMrupoessOyWTjfTK5/azqfzJOOq3Tlmxra8Zjc13OyTpRYcls1/cST7uDgvhRrYyRqGYs8PPVG8bz1UWF5+qLA9nfzN1h59l06gkyZoU6Itivy3ldE3PbQ9+KP4CnR33hiKFNqtQvNPHnc7aYBN4GQ5AQYs1b2IVVz7AgzzBEdZKGoVOUYegcFB8iTPiRuJKPDzvU88bb9LxYnW7UC9TSXWlgQ9NAuqJm4KNzR8yH+ylni3upkFn9i4SnehgdrLczqJnjW1fzfOtWUTrY0qjp0id8OLFCb1mjYznCoF3wIxPqRLR/iR+FOcuN2u8CiiVwmtpbgmljgxTsxzVuayomI1cQKXg4MJv4gR4SHRyuqll8z1GP3FiyMLiqto/qsbV6VFtb6kf9kOpR1U3QhM5geMbwOXE9YspxndIpRydjO04PbctrenByCG3ZpQR3tpRg+aYHE+GORvje4Obmalx+qW0ZB5faqkalI6RvJJaxpUJIVD2UQoTdTCjEaNwd6vog2rKX3iZ/f98Ivm00Vi9MF2oa3fq35+WmWmtbu1cc1fQhAbYEp4E4DnRcRrQ251S8uGdPBBk3RLQvkHMH1IsyZ6HMNXKod7pX6un+16UACAv7hLeL8ITDqI8/x7HOJWcmtQIOkcvTnLqIW6Ivc9udiWNzTtyZul28USrjVu9G7FAjCwbjlXD49L2OMmzD8sY+Bxlqekg67PYg9d0b3J5fja8GtyNx8u1qfCl+und311e9rip9kUnbE59Tz/6XTLApILUanhTtNs8qzXNoS9htT5rwHelfhhftZk5E29krL3TfUSOyNydLOPQlsZLUzhNg1Ffl+QBdTeb6QvuAGXiPyRyHLCUQqhpz27GuyRoS5+ox4VkhNiSTou7kGN5GHghWi2PD6fZsEO/p28QZUtMXULcNR3SKW5wtx6ETFwk/5f1HKnXAyIc2H/1buCjnGuDhhPk+W6gTrsila9SZIF4PfFehW7WeOK/G56huS+FI95grYJbYyEhKPP+Jev62XH9GwnVZeInZjaJ4Xde90wTG7ZTtODErAXFv5igTHJg6OJdqLnBUWN83seb0RdZEjsd+WLNpUtaRJ6sMP5I8ykvbFsejLYaZjlC5U6hcp1l6OOTUIy1XOID36Mz/CX6GOPtLuPkehTyzoUr+wOOAw9vLuvdusKjAJInzisw13udnGt+xntc3jLofDnv1iXpHfpQJd/Wo7Yi7e8HdzsFxVw8SfUHEGeWArB7BLDJbUo5zoL147GXJ6aPNAg/HwTyfcRyYeXZyx3tW8Q2zqg4HuXrUKecG3MPMgHs1LwBHzZRF/aC28vlpr4fH5kZdY8cxibWRWOFipheTWBtgeT9JrIYei3K6YGrGjoLSPNBNebjhOhQHLRT6u8lMxAZdPnyeODP1p1nNUbG9Tv1p6LHHyPaDcNWPykSQ5dKxzaiQ8QdgDJ48A52/2yh2dvw0hznR1Mb9TFvUk0hC8lHmYXVaitqtnwELL3ySdAEDV2svV/FFDB6l/UkW1huNttHqJItaM/gd/B0+T/RfPlJeOBEtXQH7IVAVPw6Aa7gYLCMtMt2F+S0PxIZUwmxVwdNhN6wbQ5O7p0VjWwzJ5+p7YasDGq8Id95rYuQ0Z41GfmKkONh9RX7qGHW+yqttvByO7DfMbOjhyAdNjDRezlntN1IMgeEDJ0Y28aQ0QWCrcUTGYpGxLHmQVvMjKV5rw8ryg4FhS482jsNmr2BcaRCzqQ+xHCF0LxB68JRGs6ax/phK/kVeNzcElYfzVgueIvKb8qM8uKuPpR5xdy+4m7fCfM/Aq0/zOOaSf0HHy+YUN/OG4I/8KA/m5o1nlyZFslU+JK3rBnHhTOVVnogNP1Ncz/OBEyd5Q/b7TZy0dEG7TDNOBsvAUYvhj8tw96zpFLYRjXxtxP65bQL4z6VdyPW80ynu/Py2XusdpWMzu8i0c4KrVp6NLywd2zouKqpVo5zY4ZJnreOqoqL87FbZVhWFuH9MnrXKtqqofVxVtIknpXGP2/p44BEqi4XKsmTT2vpo4XEo+Bd5LdWoTNhb8FDjb8qP8uBuwau+jri7CXcPnoJrf+wRQyn5ZYJKfeDmhQ2NPyB3ygOc+vblR5wsAicPnzJr68M4KmVWkRkzGFyNUmaV/IVA6JTmuKsfSKXLNqk2tMAfm/ylQdRO3mywIjJkFxeGASmZbIbsont13T/fnCXTPik10HUePrKmZco8H7/DgFAB2bZvmEshrsy7RKsKbXlGPOaiGIkGqEm8AHfagz8Wc/+AOg8ug+SaWvMmc3epzZLD3iQy+yqbR13owXtMxGW+b5I7/r/fTFwnbxpUSqBfJZ5pqSGOg0Lgs0q8RaPaUD41fYN4a9ecc+aGczfIzBYmvJJN90K1DbK/P4HZ86fSTrMyo4tMNZwws5fMXSdvuETyxLIfQ37cMU/tY2p4zAkkpwEAI+4lKufcXz1BJPgZ0E0yg6n9+MMqAmLAiSF+BDcT23Xlhp9smoOM8QAePOpuODi77t9IjKYEM8pqFK8Cn4tco2AjdeDGEDYh8AHUs6dTiiwVr/vTqURfvJRyi1vFC56L+/EDnDgDQeFf8tYpp+KFXXMtuyFnKtCV6Lki5EKfAiG7Fs+AiHYtdU2ovEQPkODqYhZwerI1B2pAFuFFezRsgK5MulSPnawjOpuxu532MV9aZZ4c/zQ+PSnL8SQ/VBXbldiRnQaumXptLo2YtGgcwcYiPonEw46Nz4LiO/g20jBj/SCIDYFKVpdNShkXgUbqhdUjsHH1nUYD951N8HJLItdP8FUFp2lKmlWHlHipb3f55CHiRbfX649gC9T+9971l9HV1/59xHjxB5JH96Nxd/xldD/uCslGFvRSYl/Br56iSOe2PLrsDuE+VffPijLxJlYjFhJ46oWCqimYkkmpgtETF6AEUkmxneRUjL+glyj64l5xvkCpjUwIp47wPKjsNxJMNWpPI96klQM0mDN8w9j38Crq22db8uiGrCc0/fICzxzw6PAt1KQiXMYvuyU89CX6PeE2EGqTZ8KjfuZOVEo8waLEiUECpi5JOipMwOoAa0bgoWqkfStQnsDLdJqulnLyDPIAOhQsJngzNoRdwXfASTYYMaLQRxvvyn1309Sb8CzlsvQsoV0Gx6EX+TWhN1OIva7nTbaq79Ve62OoYxRBAbToY5mgU6h1ZOpLnFV4kyepCHTCTKF4JrEyU+8T4qEd2bYkaCq7IaETwTWIzbZHFtFXcL1ISr3o3iheKFuEUKRUZSOHvKH53E3ZixOrzZNFc+D0V4KJCGLCgl739nYwFs18GQEgjfp33WF3DIdo4sBmXQyGYBO7PdgWfHA26g+/QrgcVxDQ9Z8EUk20h+XhWTrQ2NJsvOXVu6bJuCURH02fxcxgIYRFGjZU1lF/jKh8OxoPu1e344qKvFBJAo42Wvy/Hdx+Ou9f9IfKC0h5a+IvtJ68Li1RZEy92MS4FG0C3iGtv7gvvhHL5f778TM88G9uhHcDA0XAn78riQBRmqhUK4FrS59f0CtYoK2Wbqc4uPv75M1sKqk1UtMWqzUdR9Rk6d182yH7ZYwcGKnv6NPb4pQzkOro2mfx9vMbZlGo8X8=&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="0" y="3" width="320" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 13px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 22px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: normal; word-wrap: normal; ">HIVE ALGORITHM</div></div></div></foreignObject><text x="160" y="20" fill="#000000" font-family="Helvetica" font-size="22px" text-anchor="middle" font-weight="bold">HIVE ALGORITHM</text></switch></g><rect x="40" y="43" width="200" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 53px; margin-left: 42px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">It updated information about  the blockchain</div></div></div></foreignObject><text x="42" y="57" fill="#000000" font-family="Helvetica" font-size="12px">It updated information about  the...</text></switch></g><path d="M 310 283 L 420 283 L 420 296.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 420 301.88 L 416.5 294.88 L 420 296.63 L 423.5 294.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 283px; margin-left: 375px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">Yes</div></div></div></foreignObject><text x="375" y="286" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">Yes</text></switch></g><path d="M 150 283 L 50 283 L 50 373 L 230 373 L 230 386.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 391.88 L 226.5 384.88 L 230 386.63 L 233.5 384.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 283px; margin-left: 125px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">No</div></div></div></foreignObject><text x="125" y="286" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">No</text></switch></g><path d="M 230 243 L 310 283 L 230 323 L 150 283 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 283px; margin-left: 151px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">is fork detected ?</div></div></div></foreignObject><text x="230" y="287" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">is fork detected ?</text></switch></g><path d="M 420 363 L 420 373 L 230 373 L 230 386.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 391.88 L 226.5 384.88 L 230 386.63 L 233.5 384.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="360" y="303" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 333px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">execute back_from_fork</div></div></div></foreignObject><text x="420" y="337" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">execute back_from_fo...</text></switch></g><rect x="300" y="93" width="120" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 103px; margin-left: 301px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">new head block</div></div></div></foreignObject><text x="360" y="107" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">new head block</text></switch></g><path d="M 230 453 L 230 476.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 481.88 L 226.5 474.88 L 230 476.63 L 233.5 474.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="130" y="393" width="200" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 423px; margin-left: 131px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">update hive status</div></div></div></foreignObject><text x="230" y="427" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">update hive status</text></switch></g><path d="M 230 223 L 230 236.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 241.88 L 226.5 234.88 L 230 236.63 L 233.5 234.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="170" y="163" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 193px; margin-left: 171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">begin transaction</div></div></div></foreignObject><text x="230" y="197" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">begin transaction</text></switch></g><path d="M 230 633 L 230 653 L 230 643 L 230 656.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 661.88 L 226.5 654.88 L 230 656.63 L 233.5 654.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="170" y="573" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 603px; margin-left: 171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">COMMIT</div></div></div></foreignObject><text x="230" y="607" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">COMMIT</text></switch></g><path d="M 230 133 L 230 156.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 161.88 L 226.5 154.88 L 230 156.63 L 233.5 154.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="230" cy="118" rx="60" ry="15" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 118px; margin-left: 171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">START</div></div></div></foreignObject><text x="230" y="122" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">START</text></switch></g><ellipse cx="230" cy="678" rx="60" ry="15" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 678px; margin-left: 171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">END</div></div></div></foreignObject><text x="230" y="682" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">END</text></switch></g><rect x="310" y="113" width="190" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 188px; height: 1px; padding-top: 120px; margin-left: 312px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">optionally new irreversible</div></div></div></foreignObject><text x="312" y="132" fill="#000000" font-family="Helvetica" font-size="12px">optionally new irreversible</text></switch></g><rect x="10" y="113" width="140" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 123px; margin-left: 11px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Hived will start this procedure when something changed with blockchain: new block or fork</div></div></div></foreignObject><text x="80" y="127" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Hived will start this p...</text></switch></g><rect x="10" y="723" width="280" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 733px; margin-left: 150px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">RACE CONDITIONS WITH APPLICATIONS</div></div></div></foreignObject><text x="150" y="737" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">RACE CONDITIONS WITH APPLICATIONS</text></switch></g><rect x="40" y="803" width="490" height="120" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 40 843 L 530 843" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 883 L 530 883" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 270 803 L 270 923" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 803 M 530 803 M 530 843 M 40 843" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="803" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 803 M 270 803 M 270 843 M 40 843" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 823px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">APPLICATION</div></div></div></foreignObject><text x="155" y="827" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">APPLICATION</text></switch></g><rect x="270" y="803" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 803 M 530 803 M 530 843 M 270 843" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 823px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">HIVE</div></div></div></foreignObject><text x="400" y="827" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">HIVE</text></switch></g><path d="M 40 843 M 530 843 M 530 883 M 40 883" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="843" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 843 M 270 843 M 270 883 M 40 883" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 863px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">next_block(context):sets context's current_block_num = head_block</div></div></div></foreignObject><text x="155" y="867" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">next_block(context):sets context's cur...</text></switch></g><rect x="270" y="843" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 843 M 530 843 M 530 883 M 270 883" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 883 M 530 883 M 530 923 M 40 923" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="883" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 883 M 270 883 M 270 923 M 40 923" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 903px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">triggers save operations with previously stored head block</div></div></div></foreignObject><text x="155" y="907" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">triggers save operations with previous...</text></switch></g><rect x="270" y="883" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 883 M 530 883 M 530 923 M 270 923" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 903px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">update_hive_status: sets head_block</div></div></div></foreignObject><text x="400" y="907" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">update_hive_status: sets head_block</text></switch></g><path d="M 230 543 L 230 566.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 230 571.88 L 226.5 564.88 L 230 566.63 L 233.5 564.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="130" y="483" width="200" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 513px; margin-left: 131px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">remove stored operations with block_num &lt;= irreversible_block</div></div></div></foreignObject><text x="230" y="517" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">remove stored operations with blo...</text></switch></g><rect x="40" y="783" width="310" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 793px; margin-left: 195px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">Situation when application works on head_block</div></div></div></foreignObject><text x="195" y="797" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Situation when application works on head_block</text></switch></g><rect x="540" y="803" width="200" height="80" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 810px; margin-left: 542px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 27px" color="#447068">OK</font>. In next loop the application will process a new head block</div></div></div></foreignObject><text x="542" y="822" fill="#000000" font-family="Helvetica" font-size="12px">OK. In next loop the application...</text></switch></g><rect x="40" y="943" width="490" height="160" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 40 983 L 530 983" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 1023 L 530 1023" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 1063 L 530 1063" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 270 943 L 270 1103" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 943 M 530 943 M 530 983 M 40 983" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="943" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 943 M 270 943 M 270 983 M 40 983" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 963px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">APPLICATION</div></div></div></foreignObject><text x="155" y="967" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">APPLICATION</text></switch></g><rect x="270" y="943" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 943 M 530 943 M 530 983 M 270 983" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 963px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">HIVE</div></div></div></foreignObject><text x="400" y="967" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">HIVE</text></switch></g><path d="M 40 983 M 530 983 M 530 1023 M 40 1023" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="983" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 983 M 270 983 M 270 1023 M 40 1023" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="270" y="983" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 983 M 530 983 M 530 1023 M 270 1023" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1003px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">update_hive_status: sets head_block</div></div></div></foreignObject><text x="400" y="1007" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">update_hive_status: sets head_block</text></switch></g><path d="M 40 1023 M 530 1023 M 530 1063 M 40 1063" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="1023" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 1023 M 270 1023 M 270 1063 M 40 1063" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1043px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">next_block(context):sets context's current_block_num = head_block</div></div></div></foreignObject><text x="155" y="1047" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">next_block(context):sets context's cur...</text></switch></g><rect x="270" y="1023" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 1023 M 530 1023 M 530 1063 M 270 1063" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 1063 M 530 1063 M 530 1103 M 40 1103" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="1063" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 1063 M 270 1063 M 270 1103 M 40 1103" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1083px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">triggers save operations with previously stored head block</div></div></div></foreignObject><text x="155" y="1087" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">triggers save operations with previous...</text></switch></g><rect x="270" y="1063" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 1063 M 530 1063 M 530 1103 M 270 1103" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="540" y="943" width="200" height="80" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 950px; margin-left: 542px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 27px" color="#447068">OK</font>. the application will process head block and next wait for a new head block</div></div></div></foreignObject><text x="542" y="962" fill="#000000" font-family="Helvetica" font-size="12px">OK. the application will process...</text></switch></g><rect x="0" y="753" width="690" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 763px; margin-left: 345px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">Head block updates does not affect contexts which have current_block_num &lt; irreversible_block &lt; head_block</div></div></div></foreignObject><text x="345" y="767" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Head block updates does not affect contexts which have current_block_num &lt; irreversible_block &lt; head_block</text></switch></g><rect x="40" y="1133" width="490" height="160" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 40 1173 L 530 1173" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 1213 L 530 1213" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 1253 L 530 1253" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 270 1133 L 270 1293" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 1133 M 530 1133 M 530 1173 M 40 1173" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="1133" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 1133 M 270 1133 M 270 1173 M 40 1173" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1153px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">APPLICATION</div></div></div></foreignObject><text x="155" y="1157" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">APPLICATION</text></switch></g><rect x="270" y="1133" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 1133 M 530 1133 M 530 1173 M 270 1173" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1153px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">HIVE</div></div></div></foreignObject><text x="400" y="1157" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">HIVE</text></switch></g><path d="M 40 1173 M 530 1173 M 530 1213 M 40 1213" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="1173" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 1173 M 270 1173 M 270 1213 M 40 1213" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1193px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">next_block(context):sets context's current_block_num = head_block</div></div></div></foreignObject><text x="155" y="1197" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">next_block(context):sets context's cur...</text></switch></g><rect x="270" y="1173" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 1173 M 530 1173 M 530 1213 M 270 1213" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 40 1213 M 530 1213 M 530 1253 M 40 1253" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="1213" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 1213 M 270 1213 M 270 1253 M 40 1253" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="270" y="1213" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 1213 M 530 1213 M 530 1253 M 270 1253" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1233px; margin-left: 271px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">back_from_fork</div></div></div></foreignObject><text x="400" y="1237" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">back_from_fork</text></switch></g><path d="M 40 1253 M 530 1253 M 530 1293 M 40 1293" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="1253" width="230" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 40 1253 M 270 1253 M 270 1293 M 40 1293" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1273px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; max-height: 36px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">trigger saved operation with block_num = current_block_num</div></div></div></foreignObject><text x="155" y="1277" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">trigger saved operation with block_num...</text></switch></g><rect x="270" y="1253" width="260" height="40" fill="none" stroke="none" pointer-events="all"/><path d="M 270 1253 M 530 1253 M 530 1293 M 270 1293" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="550" y="1133" width="200" height="80" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 1140px; margin-left: 552px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 27px" color="#FF0000">FAILED</font>.  Operation with old head block stay saved. We cannot remove it reasonable becasue we don't know when the transaction with triggers will end.</div></div></div></foreignObject><text x="552" y="1152" fill="#000000" font-family="Helvetica" font-size="12px">FAILED.  Operation with old head...</text></switch></g><rect x="580" y="83" width="155" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 153px; height: 1px; padding-top: 93px; margin-left: 582px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font color="#FF0000">We cannot allow to start hive operations asynchronously aginst application sync</font></div></div></div></foreignObject><text x="582" y="97" fill="#000000" font-family="Helvetica" font-size="12px">We cannot allow to start h...</text></switch></g><rect x="580" y="343" width="235" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 233px; height: 1px; padding-top: 353px; margin-left: 582px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FF0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>Possible solutions:</div><div>1. enque hive operations and execute them at the binning of  next_block. PROBLEM: each context may call nextblock from different sql connection in parallel or with different frequency: for example some application may process block once per an houre.</div><div>2. raise an exception by the constraint operation block_num &lt;= head_block -won't work becasue trigger function may read old row data and in the mean time head block back to the old value, by the data in chain is different</div><div>3. before execute back from fork take an ACCESS EXCLUSIVE_lock on HIVE_STATUS_TABLE , next_block shall take an ACCESS SHARE lock ( we can add ifs for  processing block smallet than irreversible) : problem how to release share lock if the application control transactions ?</div><div>Maybe we can utilize that forks are happen relatively near the head block and we can deal with waiting for end of user transaction because we can expect small number of blocks affected by RACE CODITION ?<br /></div></div></div></div></foreignObject><text x="582" y="357" fill="#FF0000" font-family="Helvetica" font-size="12px">Possible solutions:...</text></switch></g><rect x="550" y="1253" width="190" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 188px; height: 1px; padding-top: 1260px; margin-left: 552px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FF0000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">The worst case: after fork the head block is equal the old head block - diiferent data in the chain, but the same blocks numbers in triggers</div></div></div></foreignObject><text x="552" y="1272" fill="#FF0000" font-family="Helvetica" font-size="12px">The worst case: after fork the...</text></switch></g><rect x="370" y="653" width="300" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 298px; height: 1px; padding-top: 663px; margin-left: 372px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #447068; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div><font color="#FF0000"><b>CANNOT USE SEPARATE TABLES FOR EACH OBSERVED TABLES ?!</b><br /></font></div><div><font color="#FF0000">According to documentation: SET CONSTRAINT cannon turn a NON-DEFERABLE constraint into DEFERABLE and the apps user need to add DEFFERABLE to his constraints. Moreover FK cannot use DEFFERABLE unique columns except PK.<br /></font></div></div></div></div></foreignObject><text x="372" y="667" fill="#447068" font-family="Helvetica" font-size="12px">CANNOT USE SEPARATE TABLES FOR EACH OBSERVED TABLE...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>